<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Proelium Fatale</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: black;
  color: white;
  font-family: monospace;
  overflow: hidden;
}

#stage {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
}

.hidden { display: none; }

/* INPUT */
#passwordBox {
  background: black;
  border: 1px solid white;
  color: white;
  padding: 12px 20px;
  font-size: 18px;
  outline: none;
  animation: glitchBox 3s infinite;
}

@keyframes glitchBox {
  0% { transform: none; }
  10% { transform: translate(-2px,2px); }
  20% { transform: translate(3px,-1px); }
  30% { transform: translate(-4px,1px); }
  40% { transform: translate(2px,-3px); }
  50% { transform: translate(-6px,2px); }
  60% { transform: translate(5px,-2px); }
  70% { transform: translate(-3px,3px); }
  80% { transform: translate(4px,-4px); }
  100% { transform: none; }
}

/* TEXT */
#text {
  max-width: 80%;
  font-size: 18px;
  line-height: 1.6;
}

/* ERASE */
.erase {
  animation: erase 0.8s steps(5) forwards;
}

@keyframes erase {
  0% { opacity: 1; filter: blur(0); }
  100% { opacity: 0; filter: blur(12px); }
}

/* SCREEN TEAR */
.tear {
  position: fixed;
  left: 0;
  width: 100%;
  height: 4px;
  background: rgba(255,255,255,0.08);
  mix-blend-mode: difference;
  animation: tearMove 0.15s linear infinite;
  z-index: 999;
}

@keyframes tearMove {
  0% { transform: translateX(0); }
  50% { transform: translateX(-40px); }
  100% { transform: translateX(40px); }
}

/* GLASS */
#glass {
  position: fixed;
  inset: 0;
  background: url('glass-crack.png') center/cover no-repeat;
  opacity: 0;
  z-index: 1000;
  pointer-events: none;
}

.freeze {
  animation: none !important;
  filter: contrast(1.4) brightness(0.8);
}
</style>
</head>
<body>

<div id="stage">
  <input id="passwordBox" placeholder="ENTER MEMORY" />
  <div id="text" class="hidden"></div>
</div>

<div id="glass"></div>

<script>
const PASSWORD = "Humanity Heart and Dream"; 

const input = document.getElementById("passwordBox");
const text = document.getElementById("text");
const stage = document.getElementById("stage");

input.addEventListener("keydown", e => {
  if(e.key === "Enter"){
    if(input.value === PASSWORD){
      input.classList.add("hidden");
      startLore();
    } else {
      input.value = "";
    }
  }
});

function startLore(){
  text.classList.remove("hidden");
  text.innerHTML = `THE MEMORY WAS NEVER YOURS.<br><br>IT WAS ONLY BORROWED.`;

  setTimeout(startCountdown, 12000);
}

function startCountdown(){
  let count = 10;
  const timer = setInterval(() => {
    text.innerText = `This Memory Will Fade In ${count}...`;
    count--;

    if(count < 0){
      clearInterval(timer);
      endSequence();
    }
  }, 1000);
}

function endSequence(){
  stage.classList.add("erase");
  setTimeout(startTearing, 1200);
}

function startTearing(){
  for(let i=0;i<12;i++){
    const t = document.createElement("div");
    t.className = "tear";
    t.style.top = Math.random()*100 + "vh";
    t.style.opacity = Math.random()*0.4 + 0.2;
    document.body.appendChild(t);
  }

  let shake = setInterval(()=>{
    document.body.style.transform =
      `translate(${Math.random()*20-10}px, ${Math.random()*20-10}px)`;
  }, 50);

  setTimeout(()=>{
    document.getElementById("glass").style.opacity = 0.6;
  }, 600);

  setTimeout(()=>{
    clearInterval(shake);
    document.body.style.transform = "none";
    document.body.classList.add("freeze");
    console.log("THE MEMORY IS GONE.");
  }, 2200);
}
</script>

</body>
</html>
